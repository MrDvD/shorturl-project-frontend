# Курсовая работа: URL-Shortener

**Автор:** Лабин Макар Андреевич  
**Телеграм:** [@re_translate](https://t.me/re_translate)  
**Почта:** [ma.labin@yandex.ru](mailto:ma.labin@yandex.ru)

---

## Описание проекта

Проект представляет собой веб-приложение для сокращения URL. Пользователи могут создавать уникальные короткие ссылки с возможностью задавать им пользовательские имена. Кроме того, реализован сбор и отображение расширенной статистики переходов по этим ссылкам, включая временные метки, IP-адреса и географическое расположение посетителей.

## Технологический стек

### Выбранные технологии

- **Фронтенд:** Angular v20  
  **Преимущества:** высокая скорость разработки, удобная реализация реактивного UI, обширная экосистема.  
  - Используется как технология трека обучения.

- **Taiga UI**  
  **Преимущества:** ...   
  **Альтернативы:** 
  - ...

- **Бэкенд:** Fastify  
  **Преимущества:** наивысшая производительность, поддержка плагинов, встроенная система валидации и сериализации JSON.  
  **Альтернативы:**   
  - Express — популярный, но менее производительный при обработке запросов.  
  - Koa — минималистичный, но требует более глубокой доработки для полноценного приложения.

- **CLI:** NX CLI v21  
  **Преимущества:** модульная структура, удобные инструменты для управления зависимостями и сборки проектов, поддержка standalone-режима.  
  **Альтернатива:**  
  - Lerna — популярный инструмент, но не поддерживает standalone-режим и требует дополнительной настройки для интеграции с современными инструментами.

- **Протоколы обмена данными:** HTTP/REST API с версионированием  
  Используется для простоты интеграции, масштабируемости и совместимости с фронтендом.

## Архитектура и компоненты

- **Фронтенд:** Angular SPA (Single Page Application)  
  Компоненты:  
  - Авторизация (Login, Register)  
  - Личный кабинет с управлением ссылками и статистикой  
  - Обработчики ошибок и роутинг

- **Бэкенд:** Fastify-сервер  
  Модули:  
  - API контроллеры для управления ссылками и пользователями  
  - Сервис генерации уникальных идентификаторов  
  - Сервис сбора и хранения статистики  
  - Механизмы аутентификации и авторизации
  - **База данных:** PostgreSQL — используется для хранения информации о пользователях, сокращённых ссылках и данных статистики переходов.

## Хранилища данных и обработка потоков

- **Типы хранилищ:**  
  - Основная база данных (PostgreSQL) для хранения информации о пользователях, сокращённых ссылках и данных статистики переходов.  
  - Отдельные таблицы в базе данных для логов и аналитических данных.

- **Обработка потоков данных:**  
  1. Пользователь отправляет запрос на создание короткой ссылки.  
  2. Сервер обрабатывает запрос, генерирует уникальный идентификатор и сохраняет данные в базу.  
  3. При обращении к короткой ссылке сервер выполняет поиск по идентификатору и перенаправляет пользователя на исходный URL.  
  4. Параллельно собираются данные о переходе (время, IP-адрес, геолокация) и сохраняются для последующего анализа.

- **Раздача статических файлов:**  
  Фронтенд-приложение, собранное в формате SPA, размещается в отдельной директории. Fastify настроен на обработку запросов к статическим файлам.

## Роутинг и мокапы фронтенда

### Основные маршруты

| Маршрут       | Описание                                | Пример мокапа                   |
|---------------|----------------------------------------|--------------------------------|
| `/`           | Перенаправление на `/login` или `/account` в зависимости от авторизации | Вход/главная страница          |
| `/login`      | Страница авторизации                   | Форма логина                   |
| `/register`   | Регистрация нового пользователя       | Форма регистрации              |
| `/account`    | Личный кабинет пользователя            | Панель управления ссылками, статистика |
| Все остальные маршруты | Страница ошибки 404             | Страница с сообщением об ошибке |

## Взаимодействие с внешними сервисами

- **Протоколы и контракты:** HTTP REST API, JSON форматы обмена данных.
- **Интеграция:** Может быть расширена для подключения сторонних сервисов геолокации по IP и email-рассылки.
- **Метрики:**  
  - Количество созданных ссылок
  - Количество переходов по каждой ссылке
  - Географическое распределение переходов
  - Время активности пользователей
- **Сбор ошибок:** Логирование ошибок на сервере.